<div class="free-dashboard">
    <app-dashboard-header [clientType]="'free'" [showLangSwitcher]="true">
    </app-dashboard-header>

    <div class="welcome-banner">
        <span class="material-symbols-outlined">waving_hand</span>
        <div class="welcome-content">
            <strong>{{ 'DASHBOARD.FREE.WELCOME.TITLE' | translate }}</strong>
            <p>{{ 'DASHBOARD.FREE.WELCOME.SUBTITLE' | translate }}</p>
        </div>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
        @for (stat of stats; track stat.label) {
        <div class="stat-card">
            <div class="stat-icon">
                <span class="material-symbols-outlined">{{ stat.icon }}</span>
            </div>
            <div class="stat-content">
                <div class="stat-value">
                    {{ stat.value }}<span class="stat-total">{{ stat.total }}</span>
                </div>
                <div class="stat-label">{{ stat.label | translate }}</div>
            </div>
            <div class="stat-status">{{ stat.status | translate }}</div>
        </div>
        }
    </div>

    <div class="action-cards-grid">
        <!-- Upload Card -->
        <div class="action-card">
            <div class="action-header">
                <div class="action-icon upload">
                    <span class="material-symbols-outlined">cloud_upload</span>
                </div>
                <div class="action-title">
                    <h3>{{ 'DASHBOARD.FREE.UPLOAD.TITLE' | translate }}</h3>
                    <p class="action-step">{{ 'DASHBOARD.FREE.UPLOAD.STEP' | translate }}</p>
                </div>
            </div>
            <p class="action-description">{{ 'DASHBOARD.FREE.UPLOAD.DESC' | translate }}</p>
            <ul class="action-checklist">
                @for (step of uploadSteps; track step.text) {
                <li [class.completed]="step.completed">
                    <span class="material-symbols-outlined">
                        {{ step.completed ? 'check_circle' : 'circle' }}
                    </span>
                    {{ step.text | translate }}
                    @if (step.premium) {
                    <span class="premium-badge">PREMIUM</span>
                    }
                </li>
                }
            </ul>
            <button class="btn btn-primary" routerLink="/upload">
                <span class="material-symbols-outlined">upload</span>
                {{ 'DASHBOARD.FREE.UPLOAD.BTN' | translate }}
            </button>
        </div>

        <!-- Declaration Card -->
        <div class="action-card">
            <div class="action-header">
                <div class="action-icon declaration">
                    <span class="material-symbols-outlined">edit_note</span>
                </div>
                <div class="action-title">
                    <h3>{{ 'DASHBOARD.FREE.DECLARATION.TITLE' | translate }}</h3>
                    <p class="action-step">{{ 'DASHBOARD.FREE.DECLARATION.STEP' | translate }}</p>
                </div>
            </div>
            <p class="action-description">{{ 'DASHBOARD.FREE.DECLARATION.DESC' | translate }}</p>
            <ul class="action-checklist">
                @for (step of declarationSteps; track step.text) {
                <li [class.completed]="step.completed">
                    <span class="material-symbols-outlined">
                        {{ step.completed ? 'check_circle' : 'circle' }}
                    </span>
                    {{ step.text | translate }}
                    @if (step.premium) {
                    <span class="premium-badge">PREMIUM</span>
                    }
                </li>
                }
            </ul>
            <button class="btn btn-primary" (click)="scrollToForm()">
                <span class="material-symbols-outlined">description</span>
                {{ 'DASHBOARD.FREE.DECLARATION.BTN' | translate }}
            </button>
        </div>
    </div>

    <!-- Premium Upsell -->
    <div class="premium-upsell">
        <div class="upsell-icon">
            <span class="material-symbols-outlined">workspace_premium</span>
        </div>
        <div class="upsell-content">
            <h3>{{ 'DASHBOARD.FREE.UPSELL.TITLE' | translate }} <span class="premium-arrow">â†’</span></h3>
            <p>{{ 'DASHBOARD.FREE.UPSELL.DESC' | translate }}</p>
        </div>
        <div class="upsell-actions">
            <button class="btn-premium" routerLink="/update">{{ 'DASHBOARD.FREE.UPSELL.UPGRADE_NOW' | translate
                }}</button>
            <a routerLink="/pricing" class="compare-link">{{ 'DASHBOARD.FREE.UPSELL.COMPARE_PLANS' | translate }}</a>
        </div>
    </div>

    <!-- Form Section -->
    @if (showForm1040) {
    <div class="form-section" id="form1040Section">
        <app-form-1040-principal></app-form-1040-principal>
    </div>
    }
</div>
<div class="free-dashboard">
    <!-- Dashboard Header Component -->
    <app-dashboard-header clientType="free" userName="Cliente Free" />

    <!-- Welcome Banner -->
    <div class="welcome-banner">
        <span class="material-symbols-outlined">info</span>
        <div class="welcome-content">
            <strong>Bienvenido a Neuraltax Free</strong>
            <p>Sube tus documentos fiscales y completa tu Form 1040 para declarar tus impuestos. Actualiza a Premium
                para funciones avanzadas y asistencia IA.</p>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
        @for (stat of stats; track stat.label) {
        <div class="stat-card">
            <div class="stat-icon">
                <span class="material-symbols-outlined">{{ stat.icon }}</span>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stat.value }}<span class="stat-total">{{ stat.total }}</span></div>
                <div class="stat-label">{{ stat.label }}</div>
            </div>
            <div class="stat-status">{{ stat.status }}</div>
        </div>
        }
    </div>

    <!-- Action Cards -->
    <div class="action-cards-grid">
        <!-- Upload Documents Card -->
        <div class="action-card">
            <div class="action-header">
                <div class="action-icon upload">
                    <span class="material-symbols-outlined">upload_file</span>
                </div>
                <div class="action-title">
                    <h3>Subir Documentos</h3>
                    <p class="action-step">Paso 1 de 2</p>
                </div>
            </div>
            <p class="action-description">
                Sube tu W-2, 1099 y otros documentos fiscales. Puedes subir hasta 10 documentos.
            </p>
            <ul class="action-checklist">
                @for (step of uploadSteps; track step.text) {
                <li [class.completed]="step.completed">
                    <span class="material-symbols-outlined">
                        {{ step.completed ? 'check_circle' : 'radio_button_unchecked' }}
                    </span>
                    <span>{{ step.text }}</span>
                    @if (step.premium) {
                    <span class="premium-badge">Premium</span>
                    }
                </li>
                }
            </ul>
            <button class="btn btn-primary">
                <span class="material-symbols-outlined">upload</span>
                Ir a Documentos
            </button>
        </div>

        <!-- Tax Declaration Card -->
        <div class="action-card">
            <div class="action-header">
                <div class="action-icon declaration">
                    <span class="material-symbols-outlined">description</span>
                </div>
                <div class="action-title">
                    <h3>Declaración Jurada (Form 1040)</h3>
                    <p class="action-step">Paso 2 de 2</p>
                </div>
            </div>
            <p class="action-description">
                Completa tu Form 1040 para calcular tus impuestos y reembolso estimado.
            </p>
            <ul class="action-checklist">
                @for (step of declarationSteps; track step.text) {
                <li [class.completed]="step.completed">
                    <span class="material-symbols-outlined">
                        {{ step.completed ? 'check_circle' : 'radio_button_unchecked' }}
                    </span>
                    <span>{{ step.text }}</span>
                    @if (step.premium) {
                    <span class="premium-badge">Premium</span>
                    }
                </li>
                }
            </ul>
            <button class="btn btn-primary" (click)="toggleForm()">
                <span class="material-symbols-outlined">{{ showForm1040aC ? 'close' : 'edit_document' }}</span>
                {{ showForm1040aC ? 'Cerrar Declaración' : 'Iniciar Declaración' }}
            </button>
        </div>
    </div>

    <!-- Premium Upsell -->
    <div class="premium-upsell">
        <div class="upsell-icon">
            <span class="material-symbols-outlined">workspace_premium</span>
        </div>
        <div class="upsell-content">
            <h3>Desbloquea Funciones Premium <span class="premium-arrow">↑</span></h3>
            <p>Obtén asistencia IA, documentos ilimitados, Schedule C para negocios, deducciones avanzadas y soporte
                prioritario.</p>
        </div>
        <div class="upsell-actions">
            <button class="btn btn-premium" routerLink="/pricing">Actualizar a Premium</button>
            <a href="#" class="compare-link">Comparar Planes</a>
        </div>
    </div>

    <!-- 1040 Form Section -->
    @if (showForm1040aC) {
    <div class="form-overlay-section" style="margin-top: 3rem; border-top: 2px solid #0d47a1; padding-top: 3rem;">
        <app-form-1040a-c></app-form-1040a-c>
    </div>
    }
</div>
<aside class="sidebar" [class.collapsed]="isCollapsed">
  <div class="sidebar-header">
    <button class="toggle-btn" (click)="toggleSidebar()" [title]="t('common.toggle_sidebar')">
      <span class="material-symbols-outlined">{{ isCollapsed ? 'menu' : 'menu_open' }}</span>
    </button>
    @if (!isCollapsed) {
    <div class="portal-info">
      <span class="portal-label">{{ t('common.portal_of') }}</span>
      <div class="portal-brand">
        <div class="logo-box">
          <img src="assets/neuraltax1.png" alt="Neuraltax" class="logo-img-high-contrast">
        </div>
        <span class="portal-name">
          @if (portalType === 'free') { {{ t('common.free') }} }
          @else if (portalType === 'premium') { {{ t('common.premium') }} }
          @else { {{ t('common.agents') }} }
        </span>
      </div>
    </div>
    }
  </div>

  <!-- Navigation - Only show for agent or premium portal -->
  @if (portalType === 'agent' || portalType === 'premium') {
  <ul class="sidebar-nav">
    @if (portalType === 'agent') {
    <li>
      <a routerLink="/clients" routerLinkActive="active">
        <span class="material-symbols-outlined">group</span>
        @if (!isCollapsed) { <span>{{ t('common.clients') }}</span> }
      </a>
    </li>
    <li>
      <a routerLink="/herramientas-ia" routerLinkActive="active">
        <span class="material-symbols-outlined">psychology</span>
        @if (!isCollapsed) { <span>{{ t('common.ai_tools') }}</span> }
      </a>
    </li>
    <li>
      <a routerLink="/reports" routerLinkActive="active">
        <span class="material-symbols-outlined">bar_chart</span>
        @if (!isCollapsed) { <span>{{ t('common.reports') }}</span> }
      </a>
    </li>
    }
  </ul>
  }

  <div class="sidebar-footer">
    <ul class="sidebar-footer-nav">
      <li>
        <a routerLink="/home" class="nav-link" [title]="t('common.back_to_home')">
          <span class="material-symbols-outlined">home</span>
          @if (!isCollapsed) { <span>{{ t('common.back_to_home') }}</span> }
        </a>
      </li>
      <li>
        <a href="#logout" (click)="logout($event)" class="nav-link logout-link" [title]="t('common.logout')">
          <span class="material-symbols-outlined">logout</span>
          @if (!isCollapsed) { <span>{{ t('common.logout') }}</span> }
        </a>
      </li>
    </ul>
  </div>
</aside>